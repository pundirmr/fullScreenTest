<!doctype html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Pulse</title>
</head>

<body>
    <div id="mainDiv">
        <button id="ppwp" class="block1" type="button" onclick="onShare()" class="block1">Share</button>
        <button id="ppp" class="block" type="button" onclick="">To play game, Rotate phone to Landscape</button>
    </div>
</body>


<style>

html {
    height: 110%;
}
body {
    min-height: 100%;
}

.block1 {
  display: none;
  width: 100%;
  margin: 50px 0 0 0;
  border: none;
  background-color: #582ada;
  padding: 65px 28px;
  font-size: 42px;
  cursor: pointer;
  text-align: center;
}

.block {
  display: block;
  width: 100%;
  margin: 50px 0 0 0;
  border: none;
  background-color: #04AA6D;
  padding: 65px 28px;
  font-size: 42px;
  cursor: pointer;
  text-align: center;
}
</style>

<script>
var elem = document.documentElement;
function openFullscreen() {
    if (elem.requestFullscreen) {
    elem.requestFullscreen();
    } else if (elem.webkitRequestFullscreen) { /* Safari */
    elem.webkitRequestFullscreen();
    } else if (elem.msRequestFullscreen) { /* IE11 */
    elem.msRequestFullscreen();
    }
}

/* Close fullscreen */
function closeFullscreen() {
  if (elem.exitFullscreen) {
    elem.exitFullscreen();
  } else if (elem.webkitExitFullscreen) { /* Safari */
    elem.webkitExitFullscreen();
  } else if (elem.msExitFullscreen) { /* IE11 */
    elem.msExitFullscreen();
  }
}

function onShare(){
    const title = 'Pulse';
    const url = 'https://pundirmr.github.io/pulseScore/';
    const text = "My high score on Pulse game";
    if (navigator.share) {
      navigator
        .share({ title: `${title}`, url: `${url}`,text: `${text}`})
        .then(() => {
          console.log('Thanks for sharing!');
        })
        .catch(console.error);
    } else {
      window.location.replace(
        `https://pundirmr.github.io/pulseScore/`
      );
    }
}

var previousOrientation = window.orientation;
var checkOrientation = function(){
    if(window.orientation !== previousOrientation){
        previousOrientation = window.orientation;
        // orientation changed, do your magic here
        console.log(window.orientation);

        if(window.orientation == "0"){
                    var y = document.getElementById("ppp");  
                    y.style.display = "block"; 

                    var z = document.getElementById("ppwp");   
                    z.style.display = "none"; 
                    closeFullscreen();

                    window.scrollTo(0,0);
        }else{
                    var y = document.getElementById("ppp");   
                    y.style.display = "none"; 

                    var z = document.getElementById("ppwp");   
                    z.style.display = "block"; 

                    
                    openFullscreen();

                    window.scrollTo(0,1);
        }
        
    }
};

window.addEventListener("resize", checkOrientation, false);
window.addEventListener("orientationchange", checkOrientation, false);

// (optional) Android doesn't always fire orientationChange on 180 degree turns
setInterval(checkOrientation, 2000);



</script>
</html>